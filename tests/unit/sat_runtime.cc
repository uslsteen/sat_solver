import sat;

#include <gtest/gtest.h>

TEST(Naive, ExampleTask) {
    sat::SAT sat{{{1, 2, -3}, {2, 3, -1}}};

    auto sol = sat.try_solve();
    EXPECT_TRUE(sat.is_sat());
}

TEST(Naive, False) {
    sat::SAT sat{{{2, 2, 2}, {-2, -2, -2}}};

    auto sol = sat.try_solve();
    EXPECT_FALSE(sol.has_value());
}

TEST(GenTest, TrueExample10) {
    sat::SAT sat{{
        {4, 2, 2},
        {-1, -4, 4},
        {-1, 4, -3},
        {1, -2, 3},
        {-3, 2, -1},
        {3, -3, 1},
        {-2, 3, -2},
        {-2, -1, -3},
        {-3, 4, 2},
        {4, 4, -2},
    }};

    auto sol = sat.try_solve();
    EXPECT_TRUE(sol.has_value());
}

TEST(GenTest, FalseExample10) {
    sat::SAT sat{{
        {1, -3, -3},
        {-3, -1, -3},
        {2, -2, -1},
        {3, 1, 3},
        {-3, 1, 3},
        {-1, 2, -1},
        {-2, -2, 3},
        {1, 3, 1},
        {1, 2, 3},
        {-1, 1, -3},
    }};

    auto sol = sat.try_solve();
    EXPECT_FALSE(sol.has_value());
}

TEST(GenTest, TrueExample50) {
    sat::SAT sat50{{{
        {-8, 17, -12}, {3, 6, 5},       {19, 1, 5},     {-9, 3, 1},
        {7, 7, -16},   {18, -8, 2},     {6, -9, 19},    {-6, -10, 23},
        {-10, 17, -5}, {24, -13, -23},  {-17, -22, 15}, {-9, 4, 21},
        {1, 14, -7},   {-13, 24, -6},   {-17, -1, -16}, {-24, 14, 18},
        {1, 13, 13},   {22, -10, -13},  {10, 14, 10},   {-15, 13, -19},
        {2, 23, -7},   {10, 24, 18},    {25, -14, 4},   {18, -23, -7},
        {-1, 23, 17},  {7, 23, 23},     {-22, 10, 16},  {1, -16, 9},
        {-2, -4, -8},  {-24, -17, -21}, {-1, -17, -17}, {10, 6, 7},
        {-22, 13, 24}, {9, 19, -16},    {14, -3, 11},   {-7, 12, -21},
        {18, 4, 1},    {-7, 4, -3},     {-3, 1, -23},   {9, -9, -1},
        {-8, 25, 2},   {21, 16, -2},    {-4, -1, 12},   {-12, 25, 3},
        {-13, -14, 9}, {20, -13, -22},  {20, 15, -12},  {12, 2, 24},
        {-24, 9, 24},  {-15, 10, -12},
    }}};

    auto sol = sat50.try_solve();
    EXPECT_TRUE(sat50.is_sat());
}

TEST(GenTest, FalseExample50) {
    sat::SAT sat50{{{
        {-1, 9, -6}, {10, -2, 2},  {6, -3, -6},   {3, -7, -4},   {-4, -2, 5},
        {7, -2, 9},  {6, 10, -2},  {-9, -1, -7},  {6, 1, -10},   {-7, -10, 1},
        {-8, 6, 7},  {-10, 3, -1}, {-8, 3, -3},   {1, 1, 8},     {-1, 2, 6},
        {1, 6, -8},  {-1, -3, -5}, {7, 4, -6},    {-7, -2, -6},  {-9, 8, -7},
        {-4, 9, -2}, {6, 4, -2},   {-10, -5, -5}, {-7, -5, -4},  {-5, 1, 4},
        {1, -2, -9}, {-8, 9, 7},   {-8, 5, -3},   {4, -1, 3},    {3, 5, 9},
        {5, -9, 1},  {9, -9, -2},  {4, 2, -6},    {7, 5, 3},     {1, -4, -9},
        {3, -5, -1}, {-2, 5, -9},  {-3, -3, 1},   {-10, -9, -2}, {5, 8, 9},
        {2, -9, -3}, {-2, -10, 5}, {-2, -1, -3},  {-2, -1, -7},  {-6, 4, 7},
        {6, 9, -10}, {-6, 1, -5},  {7, 5, 3},     {2, -5, 3},    {-5, -2, -8},
    }}};

    auto sol = sat50.try_solve();
    EXPECT_FALSE(sat50.is_sat());
}

TEST(GenTest, TrueExample100) {
    sat::SAT sat100{{
        {-30, 17, 11},  {5, -27, -2},    {-16, 3, 6},    {28, -7, 5},
        {-4, 3, 2},     {-6, 15, 16},    {-22, -13, 2},  {-23, 2, 8},
        {-2, -25, -15}, {-3, 14, 12},    {-22, 22, -1},  {-9, -30, -14},
        {-28, -3, 26},  {20, -15, 12},   {6, -18, -20},  {21, 17, -15},
        {4, 30, -27},   {-22, -8, 11},   {-5, 25, 8},    {-11, 20, -14},
        {26, -10, 29},  {23, 18, 25},    {20, 18, 5},    {-23, 29, -23},
        {27, 22, -27},  {10, -17, 17},   {-18, -19, 10}, {-19, 18, -10},
        {21, 10, 17},   {-15, 8, 7},     {22, 17, 15},   {-28, 2, 7},
        {13, 1, -1},    {27, 24, 30},    {15, -14, 22},  {-1, -2, -7},
        {-1, -13, 1},   {-29, 16, 13},   {9, 5, 12},     {12, 16, 22},
        {-18, -30, 8},  {6, 21, -24},    {16, 6, 12},    {-11, 13, -22},
        {-30, 19, -17}, {-17, -10, -24}, {19, -27, -10}, {16, -15, -17},
        {-14, 3, -23},  {18, -9, 21},    {24, 14, -23},  {-6, 21, 20},
        {16, 5, 5},     {-22, 24, 19},   {15, -27, -6},  {-30, 29, 14},
        {25, 26, -10},  {-30, 7, 21},    {7, -2, -15},   {-9, 20, 22},
        {26, -22, -21}, {-28, 9, 27},    {-7, -29, -7},  {28, 3, -1},
        {19, -21, 15},  {-7, -5, -13},   {27, 30, 19},   {-12, -12, 3},
        {5, -14, 8},    {-19, -30, 26},  {-24, -1, -7},  {17, 24, -7},
        {-18, -16, -4}, {11, 20, -5},    {6, -19, -4},   {-10, -28, -19},
        {-20, 12, -5},  {-7, 8, -10},    {-29, -27, 10}, {15, -1, -22},
        {5, 26, 14},    {-9, 3, -13},    {14, -8, -20},  {12, -15, -20},
        {15, 21, 27},   {2, -10, 25},    {-28, 5, -27},  {16, -17, 15},
        {-25, 7, -2},   {7, 1, 28},      {27, -30, 9},   {-11, 22, 18},
        {7, 12, 12},    {22, -2, 21},    {-6, -4, 2},    {6, 4, -15},
        {-5, 18, -26},  {30, -4, -10},   {-17, 8, -15},  {8, -6, -6},
    }};

    auto sol = sat100.try_solve();
    EXPECT_TRUE(sat100.is_sat());
}

TEST(GenTest, FalseExample100) {
    sat::SAT sat100{{{
        {2, 3, 10},   {-9, -8, 8},   {-8, -6, -6}, {10, 1, 9},   {-5, 6, 10},
        {3, -8, 1},   {-5, -8, 7},   {3, 5, -3},   {-2, -2, 7},  {4, 6, -10},
        {-5, -8, 6},  {-2, -2, -6},  {-4, 8, -9},  {-3, -9, -6}, {9, -9, 7},
        {-10, 5, 3},  {-1, -6, 4},   {-4, -1, -9}, {-8, 6, 6},   {-9, 3, -3},
        {-1, -4, -8}, {3, -5, 2},    {2, 8, -10},  {-8, 2, 5},   {9, 5, 7},
        {5, -7, 3},   {-7, -9, -10}, {-6, -9, -6}, {10, 10, -7}, {2, 4, -3},
        {-9, 6, 7},   {-8, -10, 5},  {7, 4, -3},   {2, -10, 9},  {-2, -9, -7},
        {6, 8, 10},   {-8, 3, -5},   {-4, 4, -8},  {-1, 10, -6}, {-4, -8, -10},
        {-5, -1, -1}, {-1, 9, 9},    {-5, 1, 10},  {-5, 8, 2},   {2, -10, -1},
        {9, -4, -6},  {2, 6, 2},     {-4, -9, -7}, {10, 6, 7},   {7, -2, 6},
        {-5, -3, -3}, {3, 5, 6},     {9, 7, -1},   {5, -10, 8},  {8, -6, 6},
        {5, -1, 2},   {-7, 3, -2},   {2, -3, -7},  {-4, 5, 1},   {-2, -8, -4},
        {2, 8, 9},    {-6, -2, -6},  {1, -2, -10}, {-4, 10, 3},  {7, 5, 10},
        {-1, 7, -4},  {3, -7, 1},    {2, 7, 6},    {-5, 8, 6},   {4, 4, 1},
        {-9, -3, 7},  {-8, 4, -2},   {3, -1, 2},   {8, -9, 1},   {-10, -8, -5},
        {3, 8, -6},   {8, -4, 2},    {-5, -5, -1}, {-9, -9, 4},  {10, -5, -9},
        {-7, 4, 2},   {-3, 6, -10},  {-3, -3, 6},  {2, 1, 6},    {6, 2, 5},
        {7, -2, -1},  {6, 5, 4},     {2, -4, 5},   {-6, -9, 5},  {4, -3, 7},
        {-4, 9, 10},  {-7, 10, -4},  {2, -9, -8},  {1, -10, -3}, {9, -7, -7},
        {-8, 7, -9},  {1, -8, 5},    {-1, 8, -4},  {2, -9, 4},   {-1, 8, -10},
    }}};

    auto sol = sat100.try_solve();
    EXPECT_FALSE(sat100.is_sat());
}